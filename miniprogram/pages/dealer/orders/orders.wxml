<!-- Tabå¯¼èˆª -->
<view class="tab-nav">
  <view class="tab-item" bindtap="switchToOrder">ä¸‹å•</view>
  <view class="tab-item active">è®¢å•</view>
</view>

<!-- çŠ¶æ€ç­›é€‰ -->
<view class="filter-section">
  <scroll-view scroll-x class="filter-scroll">
    <view class="filter-chips">
      <view 
        class="filter-chip {{currentFilter === 'all' ? 'active' : ''}}"
        bindtap="switchFilter"
        data-filter="all"
      >
        å…¨éƒ¨
      </view>
      <view 
        class="filter-chip {{currentFilter === 'pending' ? 'active' : ''}}"
        bindtap="switchFilter"
        data-filter="pending"
      >
        å¾…æäº¤
      </view>
      <view 
        class="filter-chip {{currentFilter === 'submitted' ? 'active' : ''}}"
        bindtap="switchFilter"
        data-filter="submitted"
      >
        å·²æäº¤
      </view>
      <view 
        class="filter-chip {{currentFilter === 'confirmed' ? 'active' : ''}}"
        bindtap="switchFilter"
        data-filter="confirmed"
      >
        å·²è°ƒè½¦
      </view>
      <view 
        class="filter-chip {{currentFilter === 'shipped' ? 'active' : ''}}"
        bindtap="switchFilter"
        data-filter="shipped"
      >
        å·²å‘è´§
      </view>
      <view 
        class="filter-chip {{currentFilter === 'completed' ? 'active' : ''}}"
        bindtap="switchFilter"
        data-filter="completed"
      >
        å·²å®Œæˆ
      </view>
    </view>
  </scroll-view>
</view>

<!-- æ‰¹é‡æ“ä½œæ  -->
<view class="batch-operations {{showBatchOperations ? 'show' : ''}}" wx:if="{{showBatchOperations}}">
  <view class="batch-content">
    <view class="batch-left">
      <checkbox 
        checked="{{selectAll}}" 
        bindchange="onSelectAllChange"
        class="select-all-checkbox"
      />
      <text class="select-all-text">å…¨é€‰</text>
      <text class="selected-count">å·²é€‰æ‹© {{selectedCount}} é¡¹</text>
    </view>
    <view class="batch-buttons">
      <button class="batch-btn batch-delete" bindtap="batchDelete" size="mini">æ‰¹é‡åˆ é™¤</button>
      <button class="batch-btn batch-submit" bindtap="batchSubmit" size="mini">æ‰¹é‡æäº¤</button>
    </view>
  </view>
</view>

<!-- è®¢å•åˆ—è¡¨ -->
<scroll-view scroll-y class="orders-list" refresher-enabled="{{true}}" refresher-triggered="{{refreshing}}" bindrefresherrefresh="onRefresh">
  <view class="order-card" wx:for="{{filteredOrders}}" wx:key="orderNo" bindtap="viewOrderDetail" data-order-no="{{item.orderNo}}">
    <!-- è®¢å•å¤´éƒ¨ -->
    <view class="order-header">
      <view class="order-left">
        <checkbox 
          wx:if="{{item.status === 'pending'}}"
          checked="{{item.selected}}" 
          bindchange="onOrderSelect"
          data-order-no="{{item.orderNo}}"
          catchtap="stopPropagation"
          class="order-checkbox"
        />
        <view class="order-info">
          <text class="order-no">è®¢å•å·: {{item.orderNo}}</text>
        </view>
      </view>
      <view class="status-badge status-{{item.status}}">{{getStatusText(item.status)}}</view>
    </view>

    <!-- è½¦è¾†ä¿¡æ¯ -->
    <view class="vehicle-info">
      <view class="vehicle-details">
        <text class="vehicle-name">{{item.vehicleSeries}}-{{item.vehicleModel}}</text>
        <text class="vehicle-config">{{item.vehicleConfig}} Â· {{item.vehicleColor}}</text>
        <text class="dealer-info">ç»é”€å•†: {{item.dealer}}</text>
      </view>
    </view>

    <!-- ä»·æ ¼å’Œæ“ä½œ -->
    <view class="order-footer">
      <view class="price-info">
        <text class="total-price">Â¥{{item.totalAmount}}</text>
        <text class="create-time">{{formatTime(item.createdAt)}}</text>
      </view>
      <view class="order-actions" wx:if="{{item.status === 'pending'}}" catchtap="stopPropagation">
        <button class="action-btn edit-btn" bindtap="editOrder" data-order-no="{{item.orderNo}}" size="mini">ç¼–è¾‘</button>
        <button class="action-btn submit-btn" bindtap="submitSingleOrder" data-order-no="{{item.orderNo}}" size="mini">å•ç‹¬æäº¤</button>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{filteredOrders.length === 0 && !loading}}">
    <view class="empty-icon">ğŸ“‹</view>
    <text class="empty-title">æš‚æ— è®¢å•</text>
    <text class="empty-desc">æ‚¨è¿˜æ²¡æœ‰åˆ›å»ºä»»ä½•è®¢å•</text>
    <button class="empty-btn" bindtap="switchToOrder">ç«‹å³ä¸‹å•</button>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <view class="loading-icon">â³</view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</scroll-view>

<!-- ç¡®è®¤å¯¹è¯æ¡† -->
<view class="modal {{showModal ? 'show' : ''}}" wx:if="{{showModal}}">
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">{{modalTitle}}</text>
    </view>
    <view class="modal-body">
      <text class="modal-message">{{modalMessage}}</text>
    </view>
    <view class="modal-footer">
      <button class="modal-btn cancel-btn" bindtap="hideModal">å–æ¶ˆ</button>
      <button class="modal-btn confirm-btn" bindtap="confirmAction">ç¡®è®¤</button>
    </view>
  </view>
</view> 